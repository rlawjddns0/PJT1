{"remainingRequest":"C:\\Users\\multicampus\\Desktop\\pjt 1 back\\cowdog_fe\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\multicampus\\Desktop\\pjt 1 back\\cowdog_fe\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!C:\\Users\\multicampus\\Desktop\\pjt 1 back\\cowdog_fe\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\multicampus\\Desktop\\pjt 1 back\\cowdog_fe\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\multicampus\\Desktop\\pjt 1 back\\cowdog_fe\\node_modules\\flipbook-vue\\src\\Flipbook.vue?vue&type=template&id=5acf684a&scoped=true","dependencies":[{"path":"C:\\Users\\multicampus\\Desktop\\pjt 1 back\\cowdog_fe\\node_modules\\flipbook-vue\\src\\Flipbook.vue","mtime":499162500000},{"path":"C:\\Users\\multicampus\\Desktop\\pjt 1 back\\cowdog_fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\multicampus\\Desktop\\pjt 1 back\\cowdog_fe\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\multicampus\\Desktop\\pjt 1 back\\cowdog_fe\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":499162500000},{"path":"C:\\Users\\multicampus\\Desktop\\pjt 1 back\\cowdog_fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\multicampus\\Desktop\\pjt 1 back\\cowdog_fe\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVuZGVyU2xvdCBhcyBfcmVuZGVyU2xvdCwgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrLCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSwgcmVuZGVyTGlzdCBhcyBfcmVuZGVyTGlzdCwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCB2U2hvdyBhcyBfdlNob3csIHdpdGhEaXJlY3RpdmVzIGFzIF93aXRoRGlyZWN0aXZlcywgd2l0aFNjb3BlSWQgYXMgX3dpdGhTY29wZUlkIH0gZnJvbSAidnVlIjsKCmNvbnN0IF93aXRoSWQgPSAvKiNfX1BVUkVfXyovX3dpdGhTY29wZUlkKCJkYXRhLXYtNWFjZjY4NGEiKTsKCmV4cG9ydCBjb25zdCByZW5kZXIgPSAvKiNfX1BVUkVfXyovX3dpdGhJZCgoX2N0eCwgX2NhY2hlKSA9PiB7CiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJkaXYiLCBudWxsLCBbX3JlbmRlclNsb3QoX2N0eC4kc2xvdHMsICJkZWZhdWx0IiwgewogICAgY2FuRmxpcExlZnQ6IF9jdHguY2FuRmxpcExlZnQsCiAgICBjYW5GbGlwUmlnaHQ6IF9jdHguY2FuRmxpcFJpZ2h0LAogICAgY2FuWm9vbUluOiBfY3R4LmNhblpvb21JbiwKICAgIGNhblpvb21PdXQ6IF9jdHguY2FuWm9vbU91dCwKICAgIHBhZ2U6IF9jdHgucGFnZSwKICAgIG51bVBhZ2VzOiBfY3R4Lm51bVBhZ2VzLAogICAgZmxpcExlZnQ6IF9jdHguZmxpcExlZnQsCiAgICBmbGlwUmlnaHQ6IF9jdHguZmxpcFJpZ2h0LAogICAgem9vbUluOiBfY3R4Lnpvb21JbiwKICAgIHpvb21PdXQ6IF9jdHguem9vbU91dAogIH0sIHVuZGVmaW5lZCwgdHJ1ZSksIF9jcmVhdGVWTm9kZSgiZGl2IiwgewogICAgY2xhc3M6IFsidmlld3BvcnQiLCB7CiAgICAgIHpvb206IF9jdHguem9vbWluZyB8fCBfY3R4Lnpvb20gPiAxLAogICAgICAnZHJhZy10by1zY3JvbGwnOiBfY3R4LmRyYWdUb1Njcm9sbAogICAgfV0sCiAgICByZWY6ICJ2aWV3cG9ydCIsCiAgICBzdHlsZTogewogICAgICBjdXJzb3I6IF9jdHguY3Vyc29yID09ICdncmFiYmluZycgPyAnZ3JhYmJpbmcnIDogJ2F1dG8nCiAgICB9LAogICAgb25Ub3VjaG1vdmU6IF9jYWNoZVs4XSB8fCAoX2NhY2hlWzhdID0gKC4uLmFyZ3MpID0+IF9jdHgub25Ub3VjaE1vdmUgJiYgX2N0eC5vblRvdWNoTW92ZSguLi5hcmdzKSksCiAgICBvblBvaW50ZXJtb3ZlOiBfY2FjaGVbOV0gfHwgKF9jYWNoZVs5XSA9ICguLi5hcmdzKSA9PiBfY3R4Lm9uUG9pbnRlck1vdmUgJiYgX2N0eC5vblBvaW50ZXJNb3ZlKC4uLmFyZ3MpKSwKICAgIG9uTW91c2Vtb3ZlOiBfY2FjaGVbMTBdIHx8IChfY2FjaGVbMTBdID0gKC4uLmFyZ3MpID0+IF9jdHgub25Nb3VzZU1vdmUgJiYgX2N0eC5vbk1vdXNlTW92ZSguLi5hcmdzKSksCiAgICBvblRvdWNoZW5kOiBfY2FjaGVbMTFdIHx8IChfY2FjaGVbMTFdID0gKC4uLmFyZ3MpID0+IF9jdHgub25Ub3VjaEVuZCAmJiBfY3R4Lm9uVG91Y2hFbmQoLi4uYXJncykpLAogICAgb25Ub3VjaGNhbmNlbDogX2NhY2hlWzEyXSB8fCAoX2NhY2hlWzEyXSA9ICguLi5hcmdzKSA9PiBfY3R4Lm9uVG91Y2hFbmQgJiYgX2N0eC5vblRvdWNoRW5kKC4uLmFyZ3MpKSwKICAgIG9uUG9pbnRlcnVwOiBfY2FjaGVbMTNdIHx8IChfY2FjaGVbMTNdID0gKC4uLmFyZ3MpID0+IF9jdHgub25Qb2ludGVyVXAgJiYgX2N0eC5vblBvaW50ZXJVcCguLi5hcmdzKSksCiAgICBvblBvaW50ZXJjYW5jZWw6IF9jYWNoZVsxNF0gfHwgKF9jYWNoZVsxNF0gPSAoLi4uYXJncykgPT4gX2N0eC5vblBvaW50ZXJVcCAmJiBfY3R4Lm9uUG9pbnRlclVwKC4uLmFyZ3MpKSwKICAgIG9uTW91c2V1cDogX2NhY2hlWzE1XSB8fCAoX2NhY2hlWzE1XSA9ICguLi5hcmdzKSA9PiBfY3R4Lm9uTW91c2VVcCAmJiBfY3R4Lm9uTW91c2VVcCguLi5hcmdzKSksCiAgICBvbldoZWVsOiBfY2FjaGVbMTZdIHx8IChfY2FjaGVbMTZdID0gKC4uLmFyZ3MpID0+IF9jdHgub25XaGVlbCAmJiBfY3R4Lm9uV2hlZWwoLi4uYXJncykpCiAgfSwgW19jcmVhdGVWTm9kZSgiZGl2IiwgewogICAgY2xhc3M6ICJmbGlwYm9vay1jb250YWluZXIiLAogICAgc3R5bGU6IHsKICAgICAgdHJhbnNmb3JtOiBgc2NhbGUoJHtfY3R4Lnpvb219KWAKICAgIH0KICB9LCBbX2NyZWF0ZVZOb2RlKCJkaXYiLCB7CiAgICBjbGFzczogImNsaWNrLXRvLWZsaXAgbGVmdCIsCiAgICBzdHlsZTogewogICAgICBjdXJzb3I6IF9jdHguY2FuRmxpcExlZnQgPyAncG9pbnRlcicgOiAnYXV0bycKICAgIH0sCiAgICBvbkNsaWNrOiBfY2FjaGVbMV0gfHwgKF9jYWNoZVsxXSA9ICguLi5hcmdzKSA9PiBfY3R4LmZsaXBMZWZ0ICYmIF9jdHguZmxpcExlZnQoLi4uYXJncykpCiAgfSwgbnVsbCwgNAogIC8qIFNUWUxFICovCiAgKSwgX2NyZWF0ZVZOb2RlKCJkaXYiLCB7CiAgICBjbGFzczogImNsaWNrLXRvLWZsaXAgcmlnaHQiLAogICAgc3R5bGU6IHsKICAgICAgY3Vyc29yOiBfY3R4LmNhbkZsaXBSaWdodCA/ICdwb2ludGVyJyA6ICdhdXRvJwogICAgfSwKICAgIG9uQ2xpY2s6IF9jYWNoZVsyXSB8fCAoX2NhY2hlWzJdID0gKC4uLmFyZ3MpID0+IF9jdHguZmxpcFJpZ2h0ICYmIF9jdHguZmxpcFJpZ2h0KC4uLmFyZ3MpKQogIH0sIG51bGwsIDQKICAvKiBTVFlMRSAqLwogICksIF9jcmVhdGVWTm9kZSgiZGl2IiwgewogICAgc3R5bGU6IHsKICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlWCgke19jdHguY2VudGVyT2Zmc2V0U21vb3RoZWR9cHgpYAogICAgfQogIH0sIFtfY3R4LnNob3dMZWZ0UGFnZSA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygiaW1nIiwgewogICAga2V5OiAwLAogICAgY2xhc3M6ICJwYWdlIGZpeGVkIiwKICAgIHN0eWxlOiB7CiAgICAgIHdpZHRoOiBfY3R4LnBhZ2VXaWR0aCArICdweCcsCiAgICAgIGhlaWdodDogX2N0eC5wYWdlSGVpZ2h0ICsgJ3B4JywKICAgICAgbGVmdDogX2N0eC54TWFyZ2luICsgJ3B4JywKICAgICAgdG9wOiBfY3R4LnlNYXJnaW4gKyAncHgnCiAgICB9LAogICAgc3JjOiBfY3R4LnBhZ2VVcmxMb2FkaW5nKF9jdHgubGVmdFBhZ2UsIHRydWUpLAogICAgb25Mb2FkOiBfY2FjaGVbM10gfHwgKF9jYWNoZVszXSA9ICRldmVudCA9PiBfY3R4LmRpZExvYWRJbWFnZSgkZXZlbnQpKQogIH0sIG51bGwsIDQ0CiAgLyogU1RZTEUsIFBST1BTLCBIWURSQVRFX0VWRU5UUyAqLwogICwgWyJzcmMiXSkpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgidi1pZiIsIHRydWUpLCBfY3R4LnNob3dSaWdodFBhZ2UgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soImltZyIsIHsKICAgIGtleTogMSwKICAgIGNsYXNzOiAicGFnZSBmaXhlZCIsCiAgICBzdHlsZTogewogICAgICB3aWR0aDogX2N0eC5wYWdlV2lkdGggKyAncHgnLAogICAgICBoZWlnaHQ6IF9jdHgucGFnZUhlaWdodCArICdweCcsCiAgICAgIGxlZnQ6IF9jdHgudmlld1dpZHRoIC8gMiArICdweCcsCiAgICAgIHRvcDogX2N0eC55TWFyZ2luICsgJ3B4JwogICAgfSwKICAgIHNyYzogX2N0eC5wYWdlVXJsTG9hZGluZyhfY3R4LnJpZ2h0UGFnZSwgdHJ1ZSksCiAgICBvbkxvYWQ6IF9jYWNoZVs0XSB8fCAoX2NhY2hlWzRdID0gJGV2ZW50ID0+IF9jdHguZGlkTG9hZEltYWdlKCRldmVudCkpCiAgfSwgbnVsbCwgNDQKICAvKiBTVFlMRSwgUFJPUFMsIEhZRFJBVEVfRVZFTlRTICovCiAgLCBbInNyYyJdKSkgOiBfY3JlYXRlQ29tbWVudFZOb2RlKCJ2LWlmIiwgdHJ1ZSksIF9jcmVhdGVWTm9kZSgiZGl2IiwgewogICAgc3R5bGU6IHsKICAgICAgb3BhY2l0eTogX2N0eC5mbGlwLm9wYWNpdHkKICAgIH0KICB9LCBbKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVCbG9jayhfRnJhZ21lbnQsIG51bGwsIF9yZW5kZXJMaXN0KF9jdHgucG9seWdvbkFycmF5LCAoW2tleSwgYmdJbWFnZSwgbGlnaHRpbmcsIGJnUG9zLCB0cmFuc2Zvcm0sIHpdKSA9PiB7CiAgICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soImRpdiIsIHsKICAgICAgY2xhc3M6IFsicG9seWdvbiIsIHsKICAgICAgICBibGFuazogIWJnSW1hZ2UKICAgICAgfV0sCiAgICAgIGtleToga2V5LAogICAgICBzdHlsZTogewogICAgICAgIGJhY2tncm91bmRJbWFnZTogYmdJbWFnZSAmJiBgdXJsKCR7X2N0eC5sb2FkSW1hZ2UoYmdJbWFnZSl9KWAsCiAgICAgICAgYmFja2dyb3VuZFNpemU6IF9jdHgucG9seWdvbkJnU2l6ZSwKICAgICAgICBiYWNrZ3JvdW5kUG9zaXRpb246IGJnUG9zLAogICAgICAgIHdpZHRoOiBfY3R4LnBvbHlnb25XaWR0aCwKICAgICAgICBoZWlnaHQ6IF9jdHgucG9seWdvbkhlaWdodCwKICAgICAgICB0cmFuc2Zvcm06IHRyYW5zZm9ybSwKICAgICAgICB6SW5kZXg6IHoKICAgICAgfQogICAgfSwgW193aXRoRGlyZWN0aXZlcyhfY3JlYXRlVk5vZGUoImRpdiIsIHsKICAgICAgY2xhc3M6ICJsaWdodGluZyIsCiAgICAgIHN0eWxlOiB7CiAgICAgICAgYmFja2dyb3VuZEltYWdlOiBsaWdodGluZwogICAgICB9CiAgICB9LCBudWxsLCA0CiAgICAvKiBTVFlMRSAqLwogICAgKSwgW1tfdlNob3csIGxpZ2h0aW5nLmxlbmd0aF1dKV0sIDYKICAgIC8qIENMQVNTLCBTVFlMRSAqLwogICAgKTsKICB9KSwgMTI4CiAgLyogS0VZRURfRlJBR01FTlQgKi8KICApKV0sIDQKICAvKiBTVFlMRSAqLwogICksIF9jcmVhdGVWTm9kZSgiZGl2IiwgewogICAgY2xhc3M6ICJib3VuZGluZy1ib3giLAogICAgc3R5bGU6IHsKICAgICAgbGVmdDogX2N0eC5ib3VuZGluZ0xlZnQgKyAncHgnLAogICAgICB0b3A6IF9jdHgueU1hcmdpbiArICdweCcsCiAgICAgIHdpZHRoOiBfY3R4LmJvdW5kaW5nUmlnaHQgLSBfY3R4LmJvdW5kaW5nTGVmdCArICdweCcsCiAgICAgIGhlaWdodDogX2N0eC5wYWdlSGVpZ2h0ICsgJ3B4JywKICAgICAgY3Vyc29yOiBfY3R4LmN1cnNvcgogICAgfSwKICAgIG9uVG91Y2hzdGFydDogX2NhY2hlWzVdIHx8IChfY2FjaGVbNV0gPSAoLi4uYXJncykgPT4gX2N0eC5vblRvdWNoU3RhcnQgJiYgX2N0eC5vblRvdWNoU3RhcnQoLi4uYXJncykpLAogICAgb25Qb2ludGVyZG93bjogX2NhY2hlWzZdIHx8IChfY2FjaGVbNl0gPSAoLi4uYXJncykgPT4gX2N0eC5vblBvaW50ZXJEb3duICYmIF9jdHgub25Qb2ludGVyRG93biguLi5hcmdzKSksCiAgICBvbk1vdXNlZG93bjogX2NhY2hlWzddIHx8IChfY2FjaGVbN10gPSAoLi4uYXJncykgPT4gX2N0eC5vbk1vdXNlRG93biAmJiBfY3R4Lm9uTW91c2VEb3duKC4uLmFyZ3MpKQogIH0sIG51bGwsIDM2CiAgLyogU1RZTEUsIEhZRFJBVEVfRVZFTlRTICovCiAgKV0sIDQKICAvKiBTVFlMRSAqLwogICldLCA0CiAgLyogU1RZTEUgKi8KICApXSwgMzgKICAvKiBDTEFTUywgU1RZTEUsIEhZRFJBVEVfRVZFTlRTICovCiAgKV0pOwp9KTs="},{"version":3,"sources":["C:\\Users\\multicampus\\Desktop\\pjt 1 back\\cowdog_fe\\node_modules\\flipbook-vue\\src\\Flipbook.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <slot v-bind=\"{\n      canFlipLeft,\n      canFlipRight,\n      canZoomIn,\n      canZoomOut,\n      page,\n      numPages,\n      flipLeft,\n      flipRight,\n      zoomIn,\n      zoomOut\n    }\" />\n    <div\n      class=\"viewport\"\n      ref=\"viewport\"\n      :class=\"{\n        zoom: zooming || zoom > 1,\n        'drag-to-scroll': dragToScroll\n      }\"\n      :style=\"{ cursor: cursor == 'grabbing' ? 'grabbing' : 'auto' }\"\n      @touchmove=\"onTouchMove\"\n      @pointermove=\"onPointerMove\"\n      @mousemove=\"onMouseMove\"\n      @touchend=\"onTouchEnd\"\n      @touchcancel=\"onTouchEnd\"\n      @pointerup=\"onPointerUp\"\n      @pointercancel=\"onPointerUp\"\n      @mouseup=\"onMouseUp\"\n      @wheel=\"onWheel\"\n    >\n      <div class=\"flipbook-container\" :style=\"{ transform: `scale(${zoom})` }\">\n        <div\n          class=\"click-to-flip left\"\n          :style=\"{ cursor: canFlipLeft ? 'pointer' : 'auto'}\"\n          @click=\"flipLeft\"\n        />\n        <div\n          class=\"click-to-flip right\"\n          :style=\"{ cursor: canFlipRight ? 'pointer' : 'auto'}\"\n          @click=\"flipRight\"\n        />\n        <div :style=\"{ transform: `translateX(${centerOffsetSmoothed}px)` }\">\n          <img\n            class=\"page fixed\"\n            :style=\"{\n              width: pageWidth + 'px',\n              height: pageHeight + 'px',\n              left: xMargin + 'px',\n              top: yMargin + 'px'\n            }\"\n            :src=\"pageUrlLoading(leftPage, true)\"\n            v-if=\"showLeftPage\"\n            @load=\"didLoadImage($event)\"\n          />\n          <img\n            class=\"page fixed\"\n            :style=\"{\n              width: pageWidth + 'px',\n              height: pageHeight + 'px',\n              left: viewWidth / 2 + 'px',\n              top: yMargin + 'px'\n            }\"\n            v-if=\"showRightPage\"\n            :src=\"pageUrlLoading(rightPage, true)\"\n            @load=\"didLoadImage($event)\"\n          />\n\n          <div :style=\"{ opacity: flip.opacity }\">\n            <div\n              v-for=\"[\n                key,\n                bgImage,\n                lighting,\n                bgPos,\n                transform,\n                z\n              ] in polygonArray\"\n              class=\"polygon\"\n              :key=\"key\"\n              :class=\"{ blank: !bgImage }\"\n              :style=\"{\n                backgroundImage: bgImage && `url(${loadImage(bgImage)})`,\n                backgroundSize: polygonBgSize,\n                backgroundPosition: bgPos,\n                width: polygonWidth,\n                height: polygonHeight,\n                transform: transform,\n                zIndex: z,\n              }\"\n            >\n              <div\n                class=\"lighting\"\n                v-show=\"lighting.length\"\n                :style=\"{ backgroundImage: lighting }\"\n              />\n            </div>\n          </div>\n          <div\n            class=\"bounding-box\"\n            :style=\"{\n              left: boundingLeft + 'px',\n              top: yMargin + 'px',\n              width: boundingRight - boundingLeft + 'px',\n              height: pageHeight + 'px',\n              cursor: cursor\n            }\"\n            @touchstart=\"onTouchStart\"\n            @pointerdown=\"onPointerDown\"\n            @mousedown=\"onMouseDown\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"coffee\">\nimport Matrix from './matrix'\nimport spinner from './spinner.svg'\n\neaseIn = (x) -> Math.pow(x, 2)\neaseOut = (x) -> 1 - easeIn(1 - x)\neaseInOut = (x) ->\n  if (x < 0.5) then easeIn(x * 2) / 2 else 0.5 + easeOut((x - 0.5) * 2) / 2\n\nIE = /Trident/.test navigator.userAgent\n\nexport default\n  props:\n    pages:\n      type: Array\n      required: true\n    pagesHiRes:\n      type: Array\n      default: -> []\n    flipDuration:\n      type: Number\n      default: 1000\n    zoomDuration:\n      type: Number\n      default: 500\n    zooms:\n      type: Array\n      default: -> [1, 2, 4]\n    perspective:\n      type: Number\n      default: 2400\n    nPolygons:\n      type: Number\n      default: 10\n    ambient:\n      type: Number\n      default: 0.4\n    gloss:\n      type: Number\n      default: 0.6\n    swipeMin:\n      type: Number\n      default: 3\n    singlePage:\n      type: Boolean\n      default: false\n    forwardDirection:\n      validator: (val) -> val == 'right' or val == 'left'\n      default: 'right'\n    centering:\n      type: Boolean\n      default: true\n    startPage:\n      type: Number\n      default: null\n    loadingImage:\n      type: String\n      default: spinner\n    clickToZoom:\n      type: Boolean\n      default: true\n\n  data: ->\n    viewWidth: 0\n    viewHeight: 0\n    imageWidth: null\n    imageHeight: null\n    displayedPages: 1\n    nImageLoad: 0\n    nImageLoadTrigger: 0\n    imageLoadCallback: null\n    currentPage: 0\n    firstPage: 0\n    secondPage: 1\n    zoomIndex: 0\n    zoom: 1\n    zooming: false\n    touchStartX: null\n    touchStartY: null\n    maxMove: 0\n    activeCursor: null\n    hasTouchEvents: false\n    hasPointerEvents: false\n    minX: Infinity\n    maxX: -Infinity\n    preloadedImages: {}\n    flip:\n      progress: 0\n      direction: null\n      frontImage: null\n      backImage: null\n      auto: false\n      opacity: 1\n    currentCenterOffset: null\n    animatingCenter: false\n    startScrollLeft: 0\n    startScrollTop: 0\n    scrollLeft: 0\n    scrollTop: 0\n    loadedImages: {}\n\n  computed:\n    canFlipLeft: ->\n      if @forwardDirection == 'left' then @canGoForward else @canGoBack\n    canFlipRight: ->\n      if @forwardDirection == 'right' then @canGoForward else @canGoBack\n    canZoomIn: -> not @zooming and @zoomIndex < @zooms_.length - 1\n    canZoomOut: -> not @zooming and @zoomIndex > 0\n    numPages: -> if @pages[0] == null then @pages.length - 1 else @pages.length\n    page: ->\n      if @pages[0] != null\n        @currentPage + 1\n      else\n        Math.max 1, @currentPage\n\n    zooms_: -> @zooms or [1]\n\n    canGoForward: ->\n      not @flip.direction and @currentPage < @pages.length - @displayedPages\n    canGoBack: ->\n      not @flip.direction and @currentPage >= @displayedPages and\n        not (@displayedPages == 1 and not @pageUrl(@firstPage - 1))\n    leftPage: ->\n      if @forwardDirection == 'right' or @displayedPages == 1\n        @firstPage\n      else\n        @secondPage\n    rightPage: ->\n      if @forwardDirection == 'left' then @firstPage else @secondPage\n    showLeftPage: ->\n      @pageUrl(@leftPage)\n    showRightPage: ->\n      @pageUrl(@rightPage) and @displayedPages == 2\n\n    cursor: ->\n      if @activeCursor\n        @activeCursor\n      else if IE\n        'auto'\n      else if @clickToZoom and @canZoomIn\n        'zoom-in'\n      else if @clickToZoom and @canZoomOut\n        'zoom-out'\n      else\n        'grab'\n\n    pageScale: ->\n      vw = @viewWidth / @displayedPages\n      xScale = vw / @imageWidth\n      yScale = @viewHeight / @imageHeight\n      scale = if xScale < yScale then xScale else yScale\n      if scale < 1 then scale else 1\n    pageWidth: -> Math.round(@imageWidth * @pageScale)\n    pageHeight: -> Math.round(@imageHeight * @pageScale)\n    xMargin: -> (@viewWidth - @pageWidth * @displayedPages) / 2\n    yMargin: -> (@viewHeight - @pageHeight) / 2\n    polygonWidth: ->\n      w = @pageWidth / @nPolygons\n      w = Math.ceil(w + 1 / @zoom)\n      w + 'px'\n    polygonHeight: -> @pageHeight + 'px'\n    polygonBgSize: -> \"#{@pageWidth}px #{@pageHeight}px\"\n    polygonArray: ->\n      @makePolygonArray('front').concat(@makePolygonArray('back'))\n    boundingLeft: ->\n      if @displayedPages == 1\n        @xMargin\n      else\n        x =\n          if @pageUrl(@leftPage)\n            @xMargin\n          else\n            @viewWidth / 2\n        if x < @minX then x else @minX\n    boundingRight: ->\n      if @displayedPages == 1\n        @viewWidth - @xMargin\n      else\n        x =\n          if @pageUrl(@rightPage)\n            @viewWidth - @xMargin\n          else\n            @viewWidth / 2\n        if x > @maxX then x else @maxX\n    centerOffset: ->\n      retval =\n        if @centering\n          Math.round(@viewWidth / 2 - (@boundingLeft + @boundingRight) / 2)\n        else\n          0\n      if @currentCenterOffset == null and @imageWidth != null\n        @currentCenterOffset = retval\n      retval\n\n    centerOffsetSmoothed: -> Math.round(@currentCenterOffset)\n\n    dragToScroll: -> not @hasTouchEvents\n\n    scrollLeftMin: ->\n      w = (@boundingRight - @boundingLeft) * @zoom\n      if w < @viewWidth\n        (@boundingLeft + @centerOffsetSmoothed) * @zoom - (@viewWidth - w) / 2\n      else\n        (@boundingLeft + @centerOffsetSmoothed) * @zoom\n\n    scrollLeftMax: ->\n      w = (@boundingRight - @boundingLeft) * @zoom\n      if w < @viewWidth\n        (@boundingLeft + @centerOffsetSmoothed) * @zoom - (@viewWidth - w) / 2\n      else\n        (@boundingRight + @centerOffsetSmoothed)* @zoom - @viewWidth\n\n    scrollTopMin: ->\n      h = @pageHeight * @zoom\n      if h < @viewHeight\n        @yMargin * @zoom - (@viewHeight - h) / 2\n      else\n        @yMargin * @zoom\n\n    scrollTopMax: ->\n      h = @pageHeight * @zoom\n      if h < @viewHeight\n        @yMargin * @zoom - (@viewHeight - h) / 2\n      else\n        (@yMargin + @pageHeight) * @zoom - @viewHeight\n\n    scrollLeftLimited: ->\n      Math.min(@scrollLeftMax, Math.max(@scrollLeftMin, @scrollLeft))\n\n    scrollTopLimited: ->\n      Math.min(@scrollTopMax, Math.max(@scrollTopMin, @scrollTop))\n\n  mounted: ->\n    window.addEventListener 'resize',  @onResize, passive: true\n    @onResize()\n    @zoom = @zooms_[0]\n    @goToPage @startPage\n\n  beforeDestroy: ->\n    window.removeEventListener 'resize',  @onResize, passive: true\n\n  methods:\n    onResize: ->\n      viewport = @$refs.viewport\n      return unless viewport\n      @viewWidth = viewport.clientWidth\n      @viewHeight = viewport.clientHeight\n      @displayedPages =\n        if @viewWidth > @viewHeight and not @singlePage then 2 else 1\n      @currentPage &= ~1 if @displayedPages == 2\n      @fixFirstPage()\n      @minX = Infinity\n      @maxX = -Infinity\n\n    fixFirstPage: ->\n      @currentPage++ if @displayedPages == 1 and\n        @currentPage == 0 and\n        @pages.length and\n        not @pageUrl(0)\n\n    pageUrl: (page, hiRes=false) ->\n      if hiRes and @zoom > 1 and not @zooming\n        url = @pagesHiRes[page]\n        return url if url\n      @pages[page] or null\n\n    pageUrlLoading: (page, hiRes=false) ->\n      url = @pageUrl(page, hiRes)\n      # High-res image doesn't use 'loading'\n      return url if hiRes and @zoom > 1 and not @zooming\n      url and @loadImage url\n\n    flipLeft: ->\n      return unless @canFlipLeft\n      @flipStart 'left', true\n\n    flipRight: ->\n      return unless @canFlipRight\n      @flipStart 'right', true\n\n    makePolygonArray: (face) ->\n      return [] unless @flip.direction\n\n      progress = @flip.progress\n      direction = @flip.direction\n\n      if @displayedPages == 1 and direction != @forwardDirection\n        progress = 1 - progress\n        direction = @forwardDirection\n\n      @flip.opacity =\n        if @displayedPages == 1 and progress > .7\n          1 - (progress - .7) / .3\n        else\n          1\n\n      image =\n        if face == 'front'\n          @flip.frontImage\n        else\n          @flip.backImage\n\n      polygonWidth = @pageWidth / @nPolygons\n\n      pageX = @xMargin\n      originRight = false\n      if @displayedPages == 1\n        if @forwardDirection == 'right'\n          if face == 'back'\n            originRight = true\n            pageX = @xMargin - @pageWidth\n        else\n          if direction == 'left'\n            if face == 'back'\n              pageX = @pageWidth - @xMargin\n            else\n              originRight = true\n          else\n            if face == 'front'\n              pageX = @pageWidth - @xMargin\n            else\n              originRight = true\n      else\n        if direction == 'left'\n          if face == 'back'\n            pageX = @viewWidth / 2\n          else\n            originRight = true\n        else\n          if face == 'front'\n            pageX = @viewWidth / 2\n          else\n            originRight = true\n\n      pageMatrix = new Matrix\n      pageMatrix.translate @viewWidth / 2\n      pageMatrix.perspective @perspective\n      pageMatrix.translate -@viewWidth / 2\n      pageMatrix.translate pageX, @yMargin\n\n      pageRotation = 0\n      if progress > 0.5\n        pageRotation = -(progress - 0.5) * 2 * 180\n      if direction == 'left'\n        pageRotation = -pageRotation\n      pageRotation += 180 if face == 'back'\n\n      if pageRotation\n        pageMatrix.translate @pageWidth if originRight\n        pageMatrix.rotateY pageRotation\n        pageMatrix.translate -@pageWidth if originRight\n\n      if progress < 0.5\n        theta = progress * 2 * Math.PI\n      else\n        theta = (1 - (progress - 0.5) * 2) * Math.PI\n      if theta == 0\n        theta = 1e-9\n      radius = @pageWidth / theta\n\n      radian = 0\n      dRadian = theta / @nPolygons\n      rotate = dRadian / 2 / Math.PI * 180\n      dRotate = dRadian / Math.PI * 180\n\n      if originRight\n        rotate = -theta / Math.PI * 180 + dRotate / 2\n\n      if face == 'back'\n        rotate = -rotate\n        dRotate = -dRotate\n\n      @minX = Infinity\n      @maxX = -Infinity\n      for i in [0...@nPolygons]\n        bgPos = \"#{i / (@nPolygons - 1) * 100}% 0px\"\n\n        m = pageMatrix.clone()\n        rad = if originRight then theta - radian else radian\n        x = Math.sin(rad) * radius\n        x = @pageWidth - x if originRight\n        z = (1 - Math.cos(rad)) * radius\n        z = -z if face == 'back'\n\n        m.translate3d x, 0, z\n        m.rotateY -rotate\n\n        x0 = m.transformX 0\n        x1 = m.transformX polygonWidth\n        @maxX = Math.max Math.max(x0, x1), @maxX\n        @minX = Math.min Math.min(x0, x1), @minX\n\n        lighting = @computeLighting(pageRotation - rotate, dRotate)\n\n        radian += dRadian\n        rotate += dRotate\n        [face+i, image, lighting, bgPos, m.toString(), Math.abs(Math.round(z))]\n\n    computeLighting: (rot, dRotate) ->\n      gradients = []\n      lightingPoints = [-0.5, -0.25, 0, 0.25, 0.5]\n      if @ambient < 1\n        blackness = 1 - @ambient\n        diffuse = lightingPoints.map (d) =>\n          (1 - Math.cos((rot - dRotate * d) / 180 * Math.PI)) * blackness\n        gradients.push \"\"\"\n          linear-gradient(to right,\n            rgba(0, 0, 0, #{diffuse[0]}),\n            rgba(0, 0, 0, #{diffuse[1]}) 25%,\n            rgba(0, 0, 0, #{diffuse[2]}) 50%,\n            rgba(0, 0, 0, #{diffuse[3]}) 75%,\n            rgba(0, 0, 0, #{diffuse[4]}))\n          \"\"\"\n\n      if @gloss > 0 and not IE\n        DEG = 30\n        POW = 200\n        specular = lightingPoints.map (d) =>\n          Math.max(\n            Math.cos((rot + DEG - dRotate * d) / 180 * Math.PI) ** POW,\n            Math.cos((rot - DEG - dRotate * d) / 180 * Math.PI) ** POW\n          )\n        gradients.push \"\"\"\n          linear-gradient(to right,\n            rgba(255, 255, 255, #{specular[0] * @gloss}),\n            rgba(255, 255, 255, #{specular[1] * @gloss}) 25%,\n            rgba(255, 255, 255, #{specular[2] * @gloss}) 50%,\n            rgba(255, 255, 255, #{specular[3] * @gloss}) 75%,\n            rgba(255, 255, 255, #{specular[4] * @gloss}))\n          \"\"\"\n      gradients.join(',')\n\n    flipStart: (direction, auto) ->\n      if direction != @forwardDirection\n        if @displayedPages == 1\n          @flip.frontImage = @pageUrl(@currentPage - 1)\n          @flip.backImage = null\n        else\n          @flip.frontImage = @pageUrl(@firstPage)\n          @flip.backImage = @pageUrl(@currentPage - @displayedPages + 1)\n      else\n        if @displayedPages == 1\n          @flip.frontImage = @pageUrl(@currentPage)\n          @flip.backImage = null\n        else\n          @flip.frontImage = @pageUrl(@secondPage)\n          @flip.backImage = @pageUrl(@currentPage + @displayedPages)\n\n      @flip.direction = direction\n      @flip.progress = 0\n      requestAnimationFrame => requestAnimationFrame =>\n        if @flip.direction != @forwardDirection\n          if @displayedPages == 2\n            @firstPage = @currentPage - @displayedPages\n        else\n          if @displayedPages == 1\n            @firstPage = @currentPage + @displayedPages\n          else\n            @secondPage = @currentPage + 1 + @displayedPages\n        @flipAuto(true) if auto\n\n    flipAuto: (ease) ->\n      t0 = Date.now()\n      duration = @flipDuration * (1 - @flip.progress)\n      startRatio = @flip.progress\n      @flip.auto = true\n      @$emit \"flip-#{@flip.direction}-start\", @page\n      animate = => requestAnimationFrame =>\n        t = Date.now() - t0\n        ratio = startRatio + t / duration\n        ratio = 1 if ratio > 1\n        @flip.progress = if ease then easeInOut ratio else ratio\n        if ratio < 1\n          animate()\n        else\n          if @flip.direction != @forwardDirection\n            @currentPage -= @displayedPages\n          else\n            @currentPage += @displayedPages\n          @$emit \"flip-#{@flip.direction}-end\", @page\n          if @displayedPages == 1 and @flip.direction == @forwardDirection\n            @flip.direction = null\n          else\n            @onImageLoad 1, => @flip.direction = null\n          @flip.auto = false\n      animate()\n\n    flipRevert: ->\n      t0 = Date.now()\n      duration = @flipDuration * @flip.progress\n      startRatio = @flip.progress\n      @flip.auto = true\n      animate = => requestAnimationFrame =>\n        t = Date.now() - t0\n        ratio = startRatio - startRatio * t / duration\n        ratio = 0 if ratio < 0\n        @flip.progress = ratio\n        if ratio > 0\n          animate()\n        else\n          @firstPage = @currentPage\n          @secondPage = @currentPage + 1\n          if @displayedPages == 1 and @flip.direction != @forwardDirection\n            @flip.direction = null\n          else\n            @onImageLoad 1, => @flip.direction = null\n          @flip.auto = false\n      animate()\n\n    onImageLoad: (trigger, cb) ->\n      @nImageLoad = 0\n      @nImageLoadTrigger = trigger\n      @imageLoadCallback = cb\n\n    didLoadImage: (ev) ->\n      if @imageWidth == null\n        @imageWidth = (ev.target or ev.path[0]).naturalWidth\n        @imageHeight = (ev.target or ev.path[0]).naturalHeight\n        @preloadImages()\n      return unless @imageLoadCallback\n      if ++@nImageLoad >= @nImageLoadTrigger\n        @imageLoadCallback()\n        @imageLoadCallback = null\n\n    zoomIn: ->\n      return unless @canZoomIn\n      @zoomIndex += 1\n      @zoomTo @zooms_[@zoomIndex]\n\n    zoomOut: ->\n      return unless @canZoomOut\n      @zoomIndex -= 1\n      @zoomTo @zooms_[@zoomIndex]\n\n    zoomTo: (zoom, fixedX, fixedY) ->\n      start = @zoom\n      end = zoom\n      viewport = @$refs.viewport\n      startX = viewport.scrollLeft\n      startY = viewport.scrollTop\n      fixedX or= viewport.clientWidth / 2\n      fixedY or= viewport.clientHeight / 2\n      containerFixedX = fixedX + startX\n      containerFixedY = fixedY + startY\n      endX = containerFixedX / start * end - fixedX\n      endY = containerFixedY / start * end - fixedY\n\n      t0 = Date.now()\n      @zooming = true\n      @$emit 'zoom-start', zoom\n      animate = => requestAnimationFrame =>\n        t = Date.now() - t0\n        ratio = t / @zoomDuration\n        ratio = 1 if ratio > 1 or IE\n        ratio = easeInOut(ratio)\n        @zoom = start + (end - start) * ratio\n        @scrollLeft = startX + (endX - startX) * ratio\n        @scrollTop = startY + (endY - startY) * ratio\n        if t < @zoomDuration\n          animate()\n        else\n          @$emit 'zoom-end', zoom\n          @zooming = false\n          @zoom = zoom\n          @scrollLeft = endX\n          @scrollTop = endY\n      animate()\n      if end > 1\n        @preloadImages true\n\n    zoomAt: (touch) ->\n      rect = @$refs.viewport.getBoundingClientRect()\n      x = touch.pageX - rect.left\n      y = touch.pageY - rect.top\n      @zoomIndex = (@zoomIndex + 1) % @zooms_.length\n      @zoomTo @zooms_[@zoomIndex], x, y\n\n    swipeStart: (touch) ->\n      @touchStartX = touch.pageX\n      @touchStartY = touch.pageY\n      @maxMove = 0\n      if @zoom <= 1\n        @activeCursor = 'grab'\n      else\n        @startScrollLeft = @$refs.viewport.scrollLeft\n        @startScrollTop = @$refs.viewport.scrollTop\n        @activeCursor = 'all-scroll'\n\n    swipeMove: (touch) ->\n      return unless @touchStartX?\n      x = touch.pageX - @touchStartX\n      y = touch.pageY - @touchStartY\n      @maxMove = Math.max(@maxMove, Math.abs(x))\n      @maxMove = Math.max(@maxMove, Math.abs(y))\n      if @zoom > 1\n        @dragScroll x, y if @dragToScroll\n        return\n      return if Math.abs(y) > Math.abs(x)\n      @activeCursor = 'grabbing'\n      if x > 0\n        if @flip.direction == null and @canFlipLeft and x >= @swipeMin\n          @flipStart 'left', false\n        if @flip.direction == 'left'\n          @flip.progress = x / @pageWidth\n          @flip.progress = 1 if @flip.progress > 1\n      else\n        if @flip.direction == null && @canFlipRight and x <= -@swipeMin\n          @flipStart 'right', false\n        if @flip.direction == 'right'\n          @flip.progress = -x / @pageWidth\n          @flip.progress = 1 if @flip.progress > 1\n      true\n\n    swipeEnd: (touch) ->\n      return unless @touchStartX?\n      @zoomAt touch if @clickToZoom and @maxMove < @swipeMin\n      if @flip.direction != null and not @flip.auto\n        if @flip.progress > 1/4\n          @flipAuto(false)\n        else\n          @flipRevert()\n      @touchStartX = null\n      @activeCursor = null\n\n    onTouchStart: (ev) ->\n      @hasTouchEvents = true\n      @swipeStart ev.changedTouches[0]\n    onTouchMove: (ev) ->\n      if @swipeMove ev.changedTouches[0]\n        ev.preventDefault() if ev.cancelable\n    onTouchEnd: (ev) -> @swipeEnd ev.changedTouches[0]\n\n    onPointerDown: (ev) ->\n      @hasPointerEvents = true\n      return if @hasTouchEvents\n      return if ev.which and ev.which != 1 # Ignore right-click\n      @swipeStart ev\n      try\n        ev.target.setPointerCapture ev.pointerId\n      catch\n\n    onPointerMove: (ev) -> @swipeMove ev unless @hasTouchEvents\n\n    onPointerUp: (ev) ->\n      return if @hasTouchEvents\n      @swipeEnd ev\n      try\n        ev.target.releasePointerCapture ev.pointerId\n      catch\n\n    onMouseDown: (ev) ->\n      return if @hasTouchEvents or @hasPointerEvents\n      return if ev.which and ev.which != 1 # Ignore right-click\n      @swipeStart ev\n    onMouseMove: (ev) ->\n      @swipeMove ev unless @hasTouchEvents or @hasPointerEvents\n    onMouseUp: (ev) ->\n      @swipeEnd ev unless @hasTouchEvents or @hasPointerEvents\n\n    dragScroll: (x, y) ->\n      @scrollLeft = @startScrollLeft - x\n      @scrollTop = @startScrollTop - y\n\n    onWheel: (ev) ->\n      if @zoom > 1 and @dragToScroll\n        @scrollLeft = @$refs.viewport.scrollLeft + ev.deltaX\n        @scrollTop = @$refs.viewport.scrollTop + ev.deltaY\n        ev.preventDefault() if ev.cancelable\n\n    preloadImages: (hiRes = false) ->\n      for i in [@currentPage - 3 .. @currentPage + 3]\n        @pageUrlLoading i # this preloads image\n      if hiRes\n        for i in [@currentPage ... @currentPage + @displayedPages]\n          src = @pagesHiRes[i]\n          if src\n            (new Image).src = src\n      return\n\n    goToPage: (p) ->\n      return if p == null or p == @page\n      if @pages[0] == null\n        if @displayedPages == 2 and p == 1\n          @currentPage = 0\n        else\n          @currentPage = p\n      else\n        @currentPage = p - 1\n      @minX = Infinity\n      @maxX = -Infinity\n      @currentCenterOffset = @centerOffset\n\n    loadImage: (url) ->\n      if @imageWidth == null\n        # First loaded image defines the image width and height.\n        # So it must be true image, not 'loading' image.\n        url\n      else\n        if @loadedImages[url]\n          url\n        else\n          img = new Image\n          img.onload = => @$set @loadedImages, url, true\n          img.src = url\n          @loadingImage\n\n  watch:\n    currentPage: ->\n      @firstPage = @currentPage\n      @secondPage = @currentPage + 1\n      @preloadImages()\n\n    centerOffset: ->\n      return if @animatingCenter\n      animate = => requestAnimationFrame =>\n        rate = 0.1\n        diff = @centerOffset - @currentCenterOffset\n        if Math.abs(diff) < 0.5\n          @currentCenterOffset = @centerOffset\n          @animatingCenter = false\n        else\n          @currentCenterOffset += diff * rate\n          animate()\n      @animatingCenter = true\n      animate()\n\n    scrollLeftLimited: (val) ->\n      if IE\n        requestAnimationFrame => @$refs.viewport.scrollLeft = val\n      else\n        @$refs.viewport.scrollLeft = val\n\n    scrollTopLimited: (val) ->\n      if IE\n        requestAnimationFrame => @$refs.viewport.scrollTop = val\n      else\n        @$refs.viewport.scrollTop = val\n\n    pages: (after, before) ->\n      @fixFirstPage()\n      if not before?.length and after?.length\n        if @startPage > 1 and after[0] == null\n          @currentPage++\n\n    startPage: (p) -> @goToPage p\n</script>\n\n<style scoped>\n.viewport {\n  -webkit-overflow-scrolling: touch;\n  width: 100%;\n  height: 100%;\n}\n\n.viewport.zoom {\n  overflow: scroll;\n}\n\n.viewport.zoom.drag-to-scroll {\n  overflow: hidden;\n}\n\n.flipbook-container {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  transform-origin: top left;\n  user-select: none;\n}\n\n.click-to-flip {\n  position: absolute;\n  width: 50%;\n  height: 100%;\n  top: 0;\n  user-select: none;\n}\n\n.click-to-flip.left {\n  left: 0;\n}\n\n.click-to-flip.right {\n  right: 0;\n}\n\n.bounding-box {\n  position: absolute;\n  user-select: none;\n}\n\n.page {\n  position: absolute;\n  backface-visibility: hidden;\n}\n\n.polygon {\n  position: absolute;\n  top: 0;\n  left: 0;\n  background-repeat: no-repeat;\n  backface-visibility: hidden;\n  transform-origin: center left;\n}\n\n.polygon.blank {\n  background-color: #ddd;\n}\n\n.polygon .lighting {\n  width: 100%;\n  height: 100%;\n}\n</style>\n"],"sourceRoot":""}]}